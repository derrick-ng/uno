(()=>{var Cn=Object.defineProperty;var jt=(t,e)=>{for(var r in e)Cn(t,r,{get:e[r],enumerable:!0})};var L=Object.create(null);L.open="0";L.close="1";L.ping="2";L.pong="3";L.message="4";L.upgrade="5";L.noop="6";var ne=Object.create(null);Object.keys(L).forEach(t=>{ne[L[t]]=t});var se={type:"error",data:"parser error"};var $t=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",zt=typeof ArrayBuffer=="function",Wt=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,oe=({type:t,data:e},r,n)=>$t&&e instanceof Blob?r?n(e):Vt(e,n):zt&&(e instanceof ArrayBuffer||Wt(e))?r?n(e):Vt(new Blob([e]),n):n(L[t]+(e||"")),Vt=(t,e)=>{let r=new FileReader;return r.onload=function(){let n=r.result.split(",")[1];e("b"+(n||""))},r.readAsDataURL(t)};function Jt(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}var Xe;function Kt(t,e){if($t&&t.data instanceof Blob)return t.data.arrayBuffer().then(Jt).then(e);if(zt&&(t.data instanceof ArrayBuffer||Wt(t.data)))return e(Jt(t.data));oe(t,!1,r=>{Xe||(Xe=new TextEncoder),e(Xe.encode(r))})}var Gt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ie=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<Gt.length;t++)ie[Gt.charCodeAt(t)]=t;var Yt=t=>{let e=t.length*.75,r=t.length,n,s=0,o,i,c,u;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);let h=new ArrayBuffer(e),f=new Uint8Array(h);for(n=0;n<r;n+=4)o=ie[t.charCodeAt(n)],i=ie[t.charCodeAt(n+1)],c=ie[t.charCodeAt(n+2)],u=ie[t.charCodeAt(n+3)],f[s++]=o<<2|i>>4,f[s++]=(i&15)<<4|c>>2,f[s++]=(c&3)<<6|u&63;return h};var kn=typeof ArrayBuffer=="function",ae=(t,e)=>{if(typeof t!="string")return{type:"message",data:Xt(t,e)};let r=t.charAt(0);return r==="b"?{type:"message",data:vn(t.substring(1),e)}:ne[r]?t.length>1?{type:ne[r],data:t.substring(1)}:{type:ne[r]}:se},vn=(t,e)=>{if(kn){let r=Yt(t);return Xt(r,e)}else return{base64:!0,data:t}},Xt=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}};var Qt="",Zt=(t,e)=>{let r=t.length,n=new Array(r),s=0;t.forEach((o,i)=>{oe(o,!1,c=>{n[i]=c,++s===r&&e(n.join(Qt))})})},er=(t,e)=>{let r=t.split(Qt),n=[];for(let s=0;s<r.length;s++){let o=ae(r[s],e);if(n.push(o),o.type==="error")break}return n};function tr(){return new TransformStream({transform(t,e){Kt(t,r=>{let n=r.length,s;if(n<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,n);else if(n<65536){s=new Uint8Array(3);let o=new DataView(s.buffer);o.setUint8(0,126),o.setUint16(1,n)}else{s=new Uint8Array(9);let o=new DataView(s.buffer);o.setUint8(0,127),o.setBigUint64(1,BigInt(n))}t.data&&typeof t.data!="string"&&(s[0]|=128),e.enqueue(s),e.enqueue(r)})}})}var Qe;function Oe(t){return t.reduce((e,r)=>e+r.length,0)}function _e(t,e){if(t[0].length===e)return t.shift();let r=new Uint8Array(e),n=0;for(let s=0;s<e;s++)r[s]=t[0][n++],n===t[0].length&&(t.shift(),n=0);return t.length&&n<t[0].length&&(t[0]=t[0].slice(n)),r}function rr(t,e){Qe||(Qe=new TextDecoder);let r=[],n=0,s=-1,o=!1;return new TransformStream({transform(i,c){for(r.push(i);;){if(n===0){if(Oe(r)<1)break;let u=_e(r,1);o=(u[0]&128)===128,s=u[0]&127,s<126?n=3:s===126?n=1:n=2}else if(n===1){if(Oe(r)<2)break;let u=_e(r,2);s=new DataView(u.buffer,u.byteOffset,u.length).getUint16(0),n=3}else if(n===2){if(Oe(r)<8)break;let u=_e(r,8),h=new DataView(u.buffer,u.byteOffset,u.length),f=h.getUint32(0);if(f>Math.pow(2,21)-1){c.enqueue(se);break}s=f*Math.pow(2,32)+h.getUint32(4),n=3}else{if(Oe(r)<s)break;let u=_e(r,s);c.enqueue(ae(o?u:Qe.decode(u),e)),n=0}if(s===0||s>t){c.enqueue(se);break}}}})}var Ze=4;function E(t){if(t)return Nn(t)}function Nn(t){for(var e in E.prototype)t[e]=E.prototype[e];return t}E.prototype.on=E.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};E.prototype.once=function(t,e){function r(){this.off(t,r),e.apply(this,arguments)}return r.fn=e,this.on(t,r),this};E.prototype.off=E.prototype.removeListener=E.prototype.removeAllListeners=E.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+t];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var n,s=0;s<r.length;s++)if(n=r[s],n===e||n.fn===e){r.splice(s,1);break}return r.length===0&&delete this._callbacks["$"+t],this};E.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),r=this._callbacks["$"+t],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(r){r=r.slice(0);for(var n=0,s=r.length;n<s;++n)r[n].apply(this,e)}return this};E.prototype.emitReserved=E.prototype.emit;E.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};E.prototype.hasListeners=function(t){return!!this.listeners(t).length};var R=typeof self<"u"?self:typeof window<"u"?window:Function("return this")();function Ce(t,...e){return e.reduce((r,n)=>(t.hasOwnProperty(n)&&(r[n]=t[n]),r),{})}var Ln=R.setTimeout,Bn=R.clearTimeout;function F(t,e){e.useNativeTimers?(t.setTimeoutFn=Ln.bind(R),t.clearTimeoutFn=Bn.bind(R)):(t.setTimeoutFn=R.setTimeout.bind(R),t.clearTimeoutFn=R.clearTimeout.bind(R))}var Pn=1.33;function nr(t){return typeof t=="string"?Dn(t):Math.ceil((t.byteLength||t.size)*Pn)}function Dn(t){let e=0,r=0;for(let n=0,s=t.length;n<s;n++)e=t.charCodeAt(n),e<128?r+=1:e<2048?r+=2:e<55296||e>=57344?r+=3:(n++,r+=4);return r}function sr(t){let e="";for(let r in t)t.hasOwnProperty(r)&&(e.length&&(e+="&"),e+=encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return e}function or(t){let e={},r=t.split("&");for(let n=0,s=r.length;n<s;n++){let o=r[n].split("=");e[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return e}var ke=class extends Error{constructor(e,r,n){super(e),this.description=r,this.context=n,this.type="TransportError"}},q=class extends E{constructor(e){super(),this.writable=!1,F(this,e),this.opts=e,this.query=e.query,this.socket=e.socket}onError(e,r,n){return super.emitReserved("error",new ke(e,r,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){let r=ae(e,this.socket.binaryType);this.onPacket(r)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,r={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){let e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){let r=sr(e);return r.length?"?"+r:""}};var lr="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),et=64,Fn={},ir=0,ve=0,ar;function cr(t){let e="";do e=lr[t%et]+e,t=Math.floor(t/et);while(t>0);return e}function Ne(){let t=cr(+new Date);return t!==ar?(ir=0,ar=t):t+"."+cr(ir++)}for(;ve<et;ve++)Fn[lr[ve]]=ve;var ur=!1;try{ur=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}var fr=ur;function tt(t){let e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||fr))return new XMLHttpRequest}catch{}if(!e)try{return new R[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}function qn(){}var Un=function(){return new tt({xdomain:!1}).responseType!=null}(),Le=class extends q{constructor(e){if(super(e),this.polling=!1,typeof location<"u"){let n=location.protocol==="https:",s=location.port;s||(s=n?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||s!==e.port}let r=e&&e.forceBase64;this.supportsBinary=Un&&!r,this.opts.withCredentials&&(this.cookieJar=void 0)}get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";let r=()=>{this.readyState="paused",e()};if(this.polling||!this.writable){let n=0;this.polling&&(n++,this.once("pollComplete",function(){--n||r()})),this.writable||(n++,this.once("drain",function(){--n||r()}))}else r()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){let r=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};er(e,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){let e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,Zt(e,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let e=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=Ne()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(e,r)}request(e={}){return Object.assign(e,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new M(this.uri(),e)}doWrite(e,r){let n=this.request({method:"POST",data:e});n.on("success",r),n.on("error",(s,o)=>{this.onError("xhr post error",s,o)})}doPoll(){let e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(r,n)=>{this.onError("xhr poll error",r,n)}),this.pollXhr=e}},M=class t extends E{constructor(e,r){super(),F(this,r),this.opts=r,this.method=r.method||"GET",this.uri=e,this.data=r.data!==void 0?r.data:null,this.create()}create(){var e;let r=Ce(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this.opts.xd;let n=this.xhr=new tt(r);try{n.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let s in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(s)&&n.setRequestHeader(s,this.opts.extraHeaders[s])}}catch{}if(this.method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(e=this.opts.cookieJar)===null||e===void 0||e.addCookies(n),"withCredentials"in n&&(n.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(n.timeout=this.opts.requestTimeout),n.onreadystatechange=()=>{var s;n.readyState===3&&((s=this.opts.cookieJar)===null||s===void 0||s.parseCookies(n)),n.readyState===4&&(n.status===200||n.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof n.status=="number"?n.status:0)},0))},n.send(this.data)}catch(s){this.setTimeoutFn(()=>{this.onError(s)},0);return}typeof document<"u"&&(this.index=t.requestsCount++,t.requests[this.index]=this)}onError(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}cleanup(e){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.xhr.onreadystatechange=qn,e)try{this.xhr.abort()}catch{}typeof document<"u"&&delete t.requests[this.index],this.xhr=null}}onLoad(){let e=this.xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}};M.requestsCount=0;M.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",hr);else if(typeof addEventListener=="function"){let t="onpagehide"in R?"pagehide":"unload";addEventListener(t,hr,!1)}}function hr(){for(let t in M.requests)M.requests.hasOwnProperty(t)&&M.requests[t].abort()}var J=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,r)=>r(e,0),ce=R.WebSocket||R.MozWebSocket,Be=!0,pr="arraybuffer";var dr=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative",Pe=class extends q{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;let e=this.uri(),r=this.opts.protocols,n=dr?{}:Ce(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=Be&&!dr?r?new ce(e,r):new ce(e):new ce(e,r,n)}catch(s){return this.emitReserved("error",s)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let r=0;r<e.length;r++){let n=e[r],s=r===e.length-1;oe(n,this.supportsBinary,o=>{let i={};Be||(n.options&&(i.compress=n.options.compress),this.opts.perMessageDeflate&&(typeof o=="string"?Buffer.byteLength(o):o.length)<this.opts.perMessageDeflate.threshold&&(i.compress=!1));try{Be?this.ws.send(o):this.ws.send(o,i)}catch{}s&&J(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){let e=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=Ne()),this.supportsBinary||(r.b64=1),this.createUri(e,r)}check(){return!!ce}};var De=class extends q{get name(){return"webtransport"}doOpen(){typeof WebTransport=="function"&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this.transport.ready.then(()=>{this.transport.createBidirectionalStream().then(e=>{let r=rr(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=e.readable.pipeThrough(r).getReader(),s=tr();s.readable.pipeTo(e.writable),this.writer=s.writable.getWriter();let o=()=>{n.read().then(({done:c,value:u})=>{c||(this.onPacket(u),o())}).catch(c=>{})};o();let i={type:"open"};this.query.sid&&(i.data=`{"sid":"${this.query.sid}"}`),this.writer.write(i).then(()=>this.onOpen())})}))}write(e){this.writable=!1;for(let r=0;r<e.length;r++){let n=e[r],s=r===e.length-1;this.writer.write(n).then(()=>{s&&J(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this.transport)===null||e===void 0||e.close()}};var rt={websocket:Pe,webtransport:De,polling:Le};var Mn=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,In=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function G(t){if(t.length>2e3)throw"URI too long";let e=t,r=t.indexOf("["),n=t.indexOf("]");r!=-1&&n!=-1&&(t=t.substring(0,r)+t.substring(r,n).replace(/:/g,";")+t.substring(n,t.length));let s=Mn.exec(t||""),o={},i=14;for(;i--;)o[In[i]]=s[i]||"";return r!=-1&&n!=-1&&(o.source=e,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=Hn(o,o.path),o.queryKey=jn(o,o.query),o}function Hn(t,e){let r=/\/{2,9}/g,n=e.replace(r,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&n.splice(0,1),e.slice(-1)=="/"&&n.splice(n.length-1,1),n}function jn(t,e){let r={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,s,o){s&&(r[s]=o)}),r}var $=class t extends E{constructor(e,r={}){super(),this.binaryType=pr,this.writeBuffer=[],e&&typeof e=="object"&&(r=e,e=null),e?(e=G(e),r.hostname=e.host,r.secure=e.protocol==="https"||e.protocol==="wss",r.port=e.port,e.query&&(r.query=e.query)):r.host&&(r.hostname=G(r.host).host),F(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=r.transports||["polling","websocket","webtransport"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=or(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){let r=Object.assign({},this.opts.query);r.EIO=Ze,r.transport=e,this.id&&(r.sid=this.id);let n=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new rt[e](n)}open(){let e;if(this.opts.rememberUpgrade&&t.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)e="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else e=this.transports[0];this.readyState="opening";try{e=this.createTransport(e)}catch{this.transports.shift(),this.open();return}e.open(),this.setTransport(e)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",r=>this.onClose("transport close",r))}probe(e){let r=this.createTransport(e),n=!1;t.priorWebsocketSuccess=!1;let s=()=>{n||(r.send([{type:"ping",data:"probe"}]),r.once("packet",l=>{if(!n)if(l.type==="pong"&&l.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;t.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(f(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{let g=new Error("probe error");g.transport=r.name,this.emitReserved("upgradeError",g)}}))};function o(){n||(n=!0,f(),r.close(),r=null)}let i=l=>{let g=new Error("probe error: "+l);g.transport=r.name,o(),this.emitReserved("upgradeError",g)};function c(){i("transport closed")}function u(){i("socket closed")}function h(l){r&&l.name!==r.name&&o()}let f=()=>{r.removeListener("open",s),r.removeListener("error",i),r.removeListener("close",c),this.off("close",u),this.off("upgrading",h)};r.once("open",s),r.once("error",i),r.once("close",c),this.once("close",u),this.once("upgrading",h),this.upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{n||r.open()},200):r.open()}onOpen(){if(this.readyState="open",t.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade){let e=0,r=this.upgrades.length;for(;e<r;e++)this.probe(this.upgrades[e])}}onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),this.resetPingTimeout(),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":let r=new Error("server error");r.code=e.data,this.onError(r);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){let e=this.getWritablePackets();this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let n=0;n<this.writeBuffer.length;n++){let s=this.writeBuffer[n].data;if(s&&(r+=nr(s)),n>0&&r>this.maxPayload)return this.writeBuffer.slice(0,n);r+=2}return this.writeBuffer}write(e,r,n){return this.sendPacket("message",e,r,n),this}send(e,r,n){return this.sendPacket("message",e,r,n),this}sendPacket(e,r,n,s){if(typeof r=="function"&&(s=r,r=void 0),typeof n=="function"&&(s=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;let o={type:e,data:r,options:n};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),s&&this.once("flush",s),this.flush()}close(){let e=()=>{this.onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),e()},n=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():e()}):this.upgrading?n():e()),this}onError(e){t.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}onClose(e,r){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",e,r),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){let r=[],n=0,s=e.length;for(;n<s;n++)~this.transports.indexOf(e[n])&&r.push(e[n]);return r}};$.protocol=Ze;var ai=$.protocol;function mr(t,e="",r){let n=t;r=r||typeof location<"u"&&location,t==null&&(t=r.protocol+"//"+r.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=r.protocol+t:t=r.host+t),/^(https?|wss?):\/\//.test(t)||(typeof r<"u"?t=r.protocol+"//"+t:t="https://"+t),n=G(t)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";let o=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+o+":"+n.port+e,n.href=n.protocol+"://"+o+(r&&r.port===n.port?"":":"+n.port),n}var ct={};jt(ct,{Decoder:()=>it,Encoder:()=>ot,PacketType:()=>y,protocol:()=>wr});var Vn=typeof ArrayBuffer=="function",Jn=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,yr=Object.prototype.toString,$n=typeof Blob=="function"||typeof Blob<"u"&&yr.call(Blob)==="[object BlobConstructor]",zn=typeof File=="function"||typeof File<"u"&&yr.call(File)==="[object FileConstructor]";function ue(t){return Vn&&(t instanceof ArrayBuffer||Jn(t))||$n&&t instanceof Blob||zn&&t instanceof File}function le(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let r=0,n=t.length;r<n;r++)if(le(t[r]))return!0;return!1}if(ue(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return le(t.toJSON(),!0);for(let r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&le(t[r]))return!0;return!1}function gr(t){let e=[],r=t.data,n=t;return n.data=nt(r,e),n.attachments=e.length,{packet:n,buffers:e}}function nt(t,e){if(!t)return t;if(ue(t)){let r={_placeholder:!0,num:e.length};return e.push(t),r}else if(Array.isArray(t)){let r=new Array(t.length);for(let n=0;n<t.length;n++)r[n]=nt(t[n],e);return r}else if(typeof t=="object"&&!(t instanceof Date)){let r={};for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=nt(t[n],e));return r}return t}function Er(t,e){return t.data=st(t.data,e),delete t.attachments,t}function st(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let r=0;r<t.length;r++)t[r]=st(t[r],e);else if(typeof t=="object")for(let r in t)Object.prototype.hasOwnProperty.call(t,r)&&(t[r]=st(t[r],e));return t}var Wn=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],wr=5,y;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(y||(y={}));var ot=class{constructor(e){this.replacer=e}encode(e){return(e.type===y.EVENT||e.type===y.ACK)&&le(e)?this.encodeAsBinary({type:e.type===y.EVENT?y.BINARY_EVENT:y.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let r=""+e.type;return(e.type===y.BINARY_EVENT||e.type===y.BINARY_ACK)&&(r+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(r+=e.nsp+","),e.id!=null&&(r+=e.id),e.data!=null&&(r+=JSON.stringify(e.data,this.replacer)),r}encodeAsBinary(e){let r=gr(e),n=this.encodeAsString(r.packet),s=r.buffers;return s.unshift(n),s}};function br(t){return Object.prototype.toString.call(t)==="[object Object]"}var it=class t extends E{constructor(e){super(),this.reviver=e}add(e){let r;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(e);let n=r.type===y.BINARY_EVENT;n||r.type===y.BINARY_ACK?(r.type=n?y.EVENT:y.ACK,this.reconstructor=new at(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(ue(e)||e.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(e),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let r=0,n={type:Number(e.charAt(0))};if(y[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===y.BINARY_EVENT||n.type===y.BINARY_ACK){let o=r+1;for(;e.charAt(++r)!=="-"&&r!=e.length;);let i=e.substring(o,r);if(i!=Number(i)||e.charAt(r)!=="-")throw new Error("Illegal attachments");n.attachments=Number(i)}if(e.charAt(r+1)==="/"){let o=r+1;for(;++r&&!(e.charAt(r)===","||r===e.length););n.nsp=e.substring(o,r)}else n.nsp="/";let s=e.charAt(r+1);if(s!==""&&Number(s)==s){let o=r+1;for(;++r;){let i=e.charAt(r);if(i==null||Number(i)!=i){--r;break}if(r===e.length)break}n.id=Number(e.substring(o,r+1))}if(e.charAt(++r)){let o=this.tryParse(e.substr(r));if(t.isPayloadValid(n.type,o))n.data=o;else throw new Error("invalid payload")}return n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,r){switch(e){case y.CONNECT:return br(r);case y.DISCONNECT:return r===void 0;case y.CONNECT_ERROR:return typeof r=="string"||br(r);case y.EVENT:case y.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&Wn.indexOf(r[0])===-1);case y.ACK:case y.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}},at=class{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){let r=Er(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}};function C(t,e,r){return t.on(e,r),function(){t.off(e,r)}}var Kn=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1}),Y=class extends E{constructor(e,r,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=r,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;let e=this.io;this.subs=[C(e,"open",this.onopen.bind(this)),C(e,"packet",this.onpacket.bind(this)),C(e,"error",this.onerror.bind(this)),C(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...r){if(Kn.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(r.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;let n={type:y.EVENT,data:r};if(n.options={},n.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){let i=this.ids++,c=r.pop();this._registerAckCallback(i,c),n.id=i}let s=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!s||!this.connected)||(this.connected?(this.notifyOutgoingListeners(n),this.packet(n)):this.sendBuffer.push(n)),this.flags={},this}_registerAckCallback(e,r){var n;let s=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(s===void 0){this.acks[e]=r;return}let o=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let c=0;c<this.sendBuffer.length;c++)this.sendBuffer[c].id===e&&this.sendBuffer.splice(c,1);r.call(this,new Error("operation has timed out"))},s),i=(...c)=>{this.io.clearTimeoutFn(o),r.apply(this,c)};i.withError=!0,this.acks[e]=i}emitWithAck(e,...r){return new Promise((n,s)=>{let o=(i,c)=>i?s(i):n(c);o.withError=!0,r.push(o),this.emit(e,...r)})}_addToQueue(e){let r;typeof e[e.length-1]=="function"&&(r=e.pop());let n={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((s,...o)=>n!==this._queue[0]?void 0:(s!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(s)):(this._queue.shift(),r&&r(null,...o)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;let r=this._queue[0];r.pending&&!e||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:y.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,r),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(n=>String(n.id)===e)){let n=this.acks[e];delete this.acks[e],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case y.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case y.EVENT:case y.BINARY_EVENT:this.onevent(e);break;case y.ACK:case y.BINARY_ACK:this.onack(e);break;case y.DISCONNECT:this.ondisconnect();break;case y.CONNECT_ERROR:this.destroy();let n=new Error(e.data.message);n.data=e.data.data,this.emitReserved("connect_error",n);break}}onevent(e){let r=e.data||[];e.id!=null&&r.push(this.ack(e.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){let r=this._anyListeners.slice();for(let n of r)n.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){let r=this,n=!1;return function(...s){n||(n=!0,r.packet({type:y.ACK,id:e,data:s}))}}onack(e){let r=this.acks[e.id];typeof r=="function"&&(delete this.acks[e.id],r.withError&&e.data.unshift(null),r.apply(this,e.data))}onconnect(e,r){this.id=e,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:y.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){let r=this._anyListeners;for(let n=0;n<r.length;n++)if(e===r[n])return r.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){let r=this._anyOutgoingListeners;for(let n=0;n<r.length;n++)if(e===r[n])return r.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){let r=this._anyOutgoingListeners.slice();for(let n of r)n.apply(this,e.data)}}};function z(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}z.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),r=Math.floor(e*this.jitter*t);t=Math.floor(e*10)&1?t+r:t-r}return Math.min(t,this.max)|0};z.prototype.reset=function(){this.attempts=0};z.prototype.setMin=function(t){this.ms=t};z.prototype.setMax=function(t){this.max=t};z.prototype.setJitter=function(t){this.jitter=t};var X=class extends E{constructor(e,r){var n;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(r=e,e=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,F(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((n=r.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new z({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=e;let s=r.parser||ct;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var r;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(r=this.backoff)===null||r===void 0||r.setMin(e),this)}randomizationFactor(e){var r;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(r=this.backoff)===null||r===void 0||r.setJitter(e),this)}reconnectionDelayMax(e){var r;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(r=this.backoff)===null||r===void 0||r.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new $(this.uri,this.opts);let r=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;let s=C(r,"open",function(){n.onopen(),e&&e()}),o=c=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",c),e?e(c):this.maybeReconnectOnOpen()},i=C(r,"error",o);if(this._timeout!==!1){let c=this._timeout,u=this.setTimeoutFn(()=>{s(),o(new Error("timeout")),r.close()},c);this.opts.autoUnref&&u.unref(),this.subs.push(()=>{this.clearTimeoutFn(u)})}return this.subs.push(s),this.subs.push(i),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");let e=this.engine;this.subs.push(C(e,"ping",this.onping.bind(this)),C(e,"data",this.ondata.bind(this)),C(e,"error",this.onerror.bind(this)),C(e,"close",this.onclose.bind(this)),C(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(r){this.onclose("parse error",r)}}ondecoded(e){J(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,r){let n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new Y(this,e,r),this.nsps[e]=n),n}_destroy(e){let r=Object.keys(this.nsps);for(let n of r)if(this.nsps[n].active)return;this._close()}_packet(e){let r=this.encoder.encode(e);for(let n=0;n<r.length;n++)this.engine.write(r[n],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e,r){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;let e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{let r=this.backoff.duration();this._reconnecting=!0;let n=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(s=>{s?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",s)):e.onreconnect()}))},r);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){let e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}};var fe={};function he(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};let r=mr(t,e.path||"/socket.io"),n=r.source,s=r.id,o=r.path,i=fe[s]&&o in fe[s].nsps,c=e.forceNew||e["force new connection"]||e.multiplex===!1||i,u;return c?u=new X(n,e):(fe[s]||(fe[s]=new X(n,e)),u=fe[s]),r.query&&!e.query&&(e.query=r.queryKey),u.socket(r.path,e)}Object.assign(he,{Manager:X,Socket:Y,io:he,connect:he});var xr=document.querySelector("form#chat-message-form"),Tr=()=>{xr&&xr.addEventListener("submit",async t=>{t.preventDefault();let r=t.target.elements.namedItem("message"),n=r.value;r.value="",console.log({message:n});let{roomId:s}=await fetch("/api/room-id",{method:"post"}).then(o=>o.json());await fetch(`/chat/${s}`,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:n})})})};var Sr=[Tr];function pe(t,e){return function(){return t.apply(e,arguments)}}var{toString:Gn}=Object.prototype,{getPrototypeOf:ft}=Object,qe=(t=>e=>{let r=Gn.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),P=t=>(t=t.toLowerCase(),e=>qe(e)===t),Ue=t=>e=>typeof e===t,{isArray:Q}=Array,de=Ue("undefined");function Yn(t){return t!==null&&!de(t)&&t.constructor!==null&&!de(t.constructor)&&v(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}var Or=P("ArrayBuffer");function Xn(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&Or(t.buffer),e}var Qn=Ue("string"),v=Ue("function"),_r=Ue("number"),Me=t=>t!==null&&typeof t=="object",Zn=t=>t===!0||t===!1,Fe=t=>{if(qe(t)!=="object")return!1;let e=ft(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},es=P("Date"),ts=P("File"),rs=P("Blob"),ns=P("FileList"),ss=t=>Me(t)&&v(t.pipe),os=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||v(t.append)&&((e=qe(t))==="formdata"||e==="object"&&v(t.toString)&&t.toString()==="[object FormData]"))},is=P("URLSearchParams"),as=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function me(t,e,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let n,s;if(typeof t!="object"&&(t=[t]),Q(t))for(n=0,s=t.length;n<s;n++)e.call(null,t[n],n,t);else{let o=r?Object.getOwnPropertyNames(t):Object.keys(t),i=o.length,c;for(n=0;n<i;n++)c=o[n],e.call(null,t[c],c,t)}}function Cr(t,e){e=e.toLowerCase();let r=Object.keys(t),n=r.length,s;for(;n-- >0;)if(s=r[n],e===s.toLowerCase())return s;return null}var kr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,vr=t=>!de(t)&&t!==kr;function ut(){let{caseless:t}=vr(this)&&this||{},e={},r=(n,s)=>{let o=t&&Cr(e,s)||s;Fe(e[o])&&Fe(n)?e[o]=ut(e[o],n):Fe(n)?e[o]=ut({},n):Q(n)?e[o]=n.slice():e[o]=n};for(let n=0,s=arguments.length;n<s;n++)arguments[n]&&me(arguments[n],r);return e}var cs=(t,e,r,{allOwnKeys:n}={})=>(me(e,(s,o)=>{r&&v(s)?t[o]=pe(s,r):t[o]=s},{allOwnKeys:n}),t),ls=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),us=(t,e,r,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},fs=(t,e,r,n)=>{let s,o,i,c={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),o=s.length;o-- >0;)i=s[o],(!n||n(i,t,e))&&!c[i]&&(e[i]=t[i],c[i]=!0);t=r!==!1&&ft(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},hs=(t,e,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;let n=t.indexOf(e,r);return n!==-1&&n===r},ps=t=>{if(!t)return null;if(Q(t))return t;let e=t.length;if(!_r(e))return null;let r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},ds=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&ft(Uint8Array)),ms=(t,e)=>{let n=(t&&t[Symbol.iterator]).call(t),s;for(;(s=n.next())&&!s.done;){let o=s.value;e.call(t,o[0],o[1])}},ys=(t,e)=>{let r,n=[];for(;(r=t.exec(e))!==null;)n.push(r);return n},gs=P("HTMLFormElement"),Es=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,s){return n.toUpperCase()+s}),Ar=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),bs=P("RegExp"),Nr=(t,e)=>{let r=Object.getOwnPropertyDescriptors(t),n={};me(r,(s,o)=>{let i;(i=e(s,o,t))!==!1&&(n[o]=i||s)}),Object.defineProperties(t,n)},ws=t=>{Nr(t,(e,r)=>{if(v(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;let n=t[r];if(v(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},xs=(t,e)=>{let r={},n=s=>{s.forEach(o=>{r[o]=!0})};return Q(t)?n(t):n(String(t).split(e)),r},Ts=()=>{},Ss=(t,e)=>(t=+t,Number.isFinite(t)?t:e),lt="abcdefghijklmnopqrstuvwxyz",Rr="0123456789",Lr={DIGIT:Rr,ALPHA:lt,ALPHA_DIGIT:lt+lt.toUpperCase()+Rr},As=(t=16,e=Lr.ALPHA_DIGIT)=>{let r="",{length:n}=e;for(;t--;)r+=e[Math.random()*n|0];return r};function Rs(t){return!!(t&&v(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}var Os=t=>{let e=new Array(10),r=(n,s)=>{if(Me(n)){if(e.indexOf(n)>=0)return;if(!("toJSON"in n)){e[s]=n;let o=Q(n)?[]:{};return me(n,(i,c)=>{let u=r(i,s+1);!de(u)&&(o[c]=u)}),e[s]=void 0,o}}return n};return r(t,0)},_s=P("AsyncFunction"),Cs=t=>t&&(Me(t)||v(t))&&v(t.then)&&v(t.catch),a={isArray:Q,isArrayBuffer:Or,isBuffer:Yn,isFormData:os,isArrayBufferView:Xn,isString:Qn,isNumber:_r,isBoolean:Zn,isObject:Me,isPlainObject:Fe,isUndefined:de,isDate:es,isFile:ts,isBlob:rs,isRegExp:bs,isFunction:v,isStream:ss,isURLSearchParams:is,isTypedArray:ds,isFileList:ns,forEach:me,merge:ut,extend:cs,trim:as,stripBOM:ls,inherits:us,toFlatObject:fs,kindOf:qe,kindOfTest:P,endsWith:hs,toArray:ps,forEachEntry:ms,matchAll:ys,isHTMLForm:gs,hasOwnProperty:Ar,hasOwnProp:Ar,reduceDescriptors:Nr,freezeMethods:ws,toObjectSet:xs,toCamelCase:Es,noop:Ts,toFiniteNumber:Ss,findKey:Cr,global:kr,isContextDefined:vr,ALPHABET:Lr,generateString:As,isSpecCompliantForm:Rs,toJSONObject:Os,isAsyncFn:_s,isThenable:Cs};function Z(t,e,r,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),s&&(this.response=s)}a.inherits(Z,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:a.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var Br=Z.prototype,Pr={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Pr[t]={value:t}});Object.defineProperties(Z,Pr);Object.defineProperty(Br,"isAxiosError",{value:!0});Z.from=(t,e,r,n,s,o)=>{let i=Object.create(Br);return a.toFlatObject(t,i,function(u){return u!==Error.prototype},c=>c!=="isAxiosError"),Z.call(i,t.message,e,r,n,s),i.cause=t,i.name=t.name,o&&Object.assign(i,o),i};var m=Z;var Ie=null;function ht(t){return a.isPlainObject(t)||a.isArray(t)}function Fr(t){return a.endsWith(t,"[]")?t.slice(0,-2):t}function Dr(t,e,r){return t?t.concat(e).map(function(s,o){return s=Fr(s),!r&&o?"["+s+"]":s}).join(r?".":""):e}function ks(t){return a.isArray(t)&&!t.some(ht)}var vs=a.toFlatObject(a,{},null,function(e){return/^is[A-Z]/.test(e)});function Ns(t,e,r){if(!a.isObject(t))throw new TypeError("target must be an object");e=e||new(Ie||FormData),r=a.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(d,x){return!a.isUndefined(x[d])});let n=r.metaTokens,s=r.visitor||f,o=r.dots,i=r.indexes,u=(r.Blob||typeof Blob<"u"&&Blob)&&a.isSpecCompliantForm(e);if(!a.isFunction(s))throw new TypeError("visitor must be a function");function h(p){if(p===null)return"";if(a.isDate(p))return p.toISOString();if(!u&&a.isBlob(p))throw new m("Blob is not supported. Use a Buffer instead.");return a.isArrayBuffer(p)||a.isTypedArray(p)?u&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function f(p,d,x){let S=p;if(p&&!x&&typeof p=="object"){if(a.endsWith(d,"{}"))d=n?d:d.slice(0,-2),p=JSON.stringify(p);else if(a.isArray(p)&&ks(p)||(a.isFileList(p)||a.endsWith(d,"[]"))&&(S=a.toArray(p)))return d=Fr(d),S.forEach(function(N,It){!(a.isUndefined(N)||N===null)&&e.append(i===!0?Dr([d],It,o):i===null?d:d+"[]",h(N))}),!1}return ht(p)?!0:(e.append(Dr(x,d,o),h(p)),!1)}let l=[],g=Object.assign(vs,{defaultVisitor:f,convertValue:h,isVisitable:ht});function b(p,d){if(!a.isUndefined(p)){if(l.indexOf(p)!==-1)throw Error("Circular reference detected in "+d.join("."));l.push(p),a.forEach(p,function(S,B){(!(a.isUndefined(S)||S===null)&&s.call(e,S,a.isString(B)?B.trim():B,d,g))===!0&&b(S,d?d.concat(B):[B])}),l.pop()}}if(!a.isObject(t))throw new TypeError("data must be an object");return b(t),e}var I=Ns;function qr(t){let e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function Ur(t,e){this._pairs=[],t&&I(t,this,e)}var Mr=Ur.prototype;Mr.append=function(e,r){this._pairs.push([e,r])};Mr.toString=function(e){let r=e?function(n){return e.call(this,n,qr)}:qr;return this._pairs.map(function(s){return r(s[0])+"="+r(s[1])},"").join("&")};var He=Ur;function Ls(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ye(t,e,r){if(!e)return t;let n=r&&r.encode||Ls,s=r&&r.serialize,o;if(s?o=s(e,r):o=a.isURLSearchParams(e)?e.toString():new He(e,r).toString(n),o){let i=t.indexOf("#");i!==-1&&(t=t.slice(0,i)),t+=(t.indexOf("?")===-1?"?":"&")+o}return t}var pt=class{constructor(){this.handlers=[]}use(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){a.forEach(this.handlers,function(n){n!==null&&e(n)})}},dt=pt;var je={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1};var Ir=typeof URLSearchParams<"u"?URLSearchParams:He;var Hr=typeof FormData<"u"?FormData:null;var jr=typeof Blob<"u"?Blob:null;var Vr={isBrowser:!0,classes:{URLSearchParams:Ir,FormData:Hr,Blob:jr},protocols:["http","https","file","blob","url","data"]};var mt={};jt(mt,{hasBrowserEnv:()=>Jr,hasStandardBrowserEnv:()=>Bs,hasStandardBrowserWebWorkerEnv:()=>Ps});var Jr=typeof window<"u"&&typeof document<"u",Bs=(t=>Jr&&["ReactNative","NativeScript","NS"].indexOf(t)<0)(typeof navigator<"u"&&navigator.product),Ps=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function";var O={...mt,...Vr};function yt(t,e){return I(t,new O.classes.URLSearchParams,Object.assign({visitor:function(r,n,s,o){return O.isNode&&a.isBuffer(r)?(this.append(n,r.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},e))}function Ds(t){return a.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Fs(t){let e={},r=Object.keys(t),n,s=r.length,o;for(n=0;n<s;n++)o=r[n],e[o]=t[o];return e}function qs(t){function e(r,n,s,o){let i=r[o++];if(i==="__proto__")return!0;let c=Number.isFinite(+i),u=o>=r.length;return i=!i&&a.isArray(s)?s.length:i,u?(a.hasOwnProp(s,i)?s[i]=[s[i],n]:s[i]=n,!c):((!s[i]||!a.isObject(s[i]))&&(s[i]=[]),e(r,n,s[i],o)&&a.isArray(s[i])&&(s[i]=Fs(s[i])),!c)}if(a.isFormData(t)&&a.isFunction(t.entries)){let r={};return a.forEachEntry(t,(n,s)=>{e(Ds(n),s,r,0)}),r}return null}var Ve=qs;function Us(t,e,r){if(a.isString(t))try{return(e||JSON.parse)(t),a.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}var gt={transitional:je,adapter:["xhr","http"],transformRequest:[function(e,r){let n=r.getContentType()||"",s=n.indexOf("application/json")>-1,o=a.isObject(e);if(o&&a.isHTMLForm(e)&&(e=new FormData(e)),a.isFormData(e))return s?JSON.stringify(Ve(e)):e;if(a.isArrayBuffer(e)||a.isBuffer(e)||a.isStream(e)||a.isFile(e)||a.isBlob(e))return e;if(a.isArrayBufferView(e))return e.buffer;if(a.isURLSearchParams(e))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let c;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return yt(e,this.formSerializer).toString();if((c=a.isFileList(e))||n.indexOf("multipart/form-data")>-1){let u=this.env&&this.env.FormData;return I(c?{"files[]":e}:e,u&&new u,this.formSerializer)}}return o||s?(r.setContentType("application/json",!1),Us(e)):e}],transformResponse:[function(e){let r=this.transitional||gt.transitional,n=r&&r.forcedJSONParsing,s=this.responseType==="json";if(e&&a.isString(e)&&(n&&!this.responseType||s)){let i=!(r&&r.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(c){if(i)throw c.name==="SyntaxError"?m.from(c,m.ERR_BAD_RESPONSE,this,null,this.response):c}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:O.classes.FormData,Blob:O.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};a.forEach(["delete","get","head","post","put","patch"],t=>{gt.headers[t]={}});var ee=gt;var Ms=a.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),$r=t=>{let e={},r,n,s;return t&&t.split(`
`).forEach(function(i){s=i.indexOf(":"),r=i.substring(0,s).trim().toLowerCase(),n=i.substring(s+1).trim(),!(!r||e[r]&&Ms[r])&&(r==="set-cookie"?e[r]?e[r].push(n):e[r]=[n]:e[r]=e[r]?e[r]+", "+n:n)}),e};var zr=Symbol("internals");function ge(t){return t&&String(t).trim().toLowerCase()}function Je(t){return t===!1||t==null?t:a.isArray(t)?t.map(Je):String(t)}function Is(t){let e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g,n;for(;n=r.exec(t);)e[n[1]]=n[2];return e}var Hs=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Et(t,e,r,n,s){if(a.isFunction(n))return n.call(this,e,r);if(s&&(e=r),!!a.isString(e)){if(a.isString(n))return e.indexOf(n)!==-1;if(a.isRegExp(n))return n.test(e)}}function js(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,r,n)=>r.toUpperCase()+n)}function Vs(t,e){let r=a.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+r,{value:function(s,o,i){return this[n].call(this,e,s,o,i)},configurable:!0})})}var te=class{constructor(e){e&&this.set(e)}set(e,r,n){let s=this;function o(c,u,h){let f=ge(u);if(!f)throw new Error("header name must be a non-empty string");let l=a.findKey(s,f);(!l||s[l]===void 0||h===!0||h===void 0&&s[l]!==!1)&&(s[l||u]=Je(c))}let i=(c,u)=>a.forEach(c,(h,f)=>o(h,f,u));return a.isPlainObject(e)||e instanceof this.constructor?i(e,r):a.isString(e)&&(e=e.trim())&&!Hs(e)?i($r(e),r):e!=null&&o(r,e,n),this}get(e,r){if(e=ge(e),e){let n=a.findKey(this,e);if(n){let s=this[n];if(!r)return s;if(r===!0)return Is(s);if(a.isFunction(r))return r.call(this,s,n);if(a.isRegExp(r))return r.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=ge(e),e){let n=a.findKey(this,e);return!!(n&&this[n]!==void 0&&(!r||Et(this,this[n],n,r)))}return!1}delete(e,r){let n=this,s=!1;function o(i){if(i=ge(i),i){let c=a.findKey(n,i);c&&(!r||Et(n,n[c],c,r))&&(delete n[c],s=!0)}}return a.isArray(e)?e.forEach(o):o(e),s}clear(e){let r=Object.keys(this),n=r.length,s=!1;for(;n--;){let o=r[n];(!e||Et(this,this[o],o,e,!0))&&(delete this[o],s=!0)}return s}normalize(e){let r=this,n={};return a.forEach(this,(s,o)=>{let i=a.findKey(n,o);if(i){r[i]=Je(s),delete r[o];return}let c=e?js(o):String(o).trim();c!==o&&delete r[o],r[c]=Je(s),n[c]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){let r=Object.create(null);return a.forEach(this,(n,s)=>{n!=null&&n!==!1&&(r[s]=e&&a.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,r])=>e+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...r){let n=new this(e);return r.forEach(s=>n.set(s)),n}static accessor(e){let n=(this[zr]=this[zr]={accessors:{}}).accessors,s=this.prototype;function o(i){let c=ge(i);n[c]||(Vs(s,i),n[c]=!0)}return a.isArray(e)?e.forEach(o):o(e),this}};te.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);a.reduceDescriptors(te.prototype,({value:t},e)=>{let r=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(n){this[r]=n}}});a.freezeMethods(te);var _=te;function Ee(t,e){let r=this||ee,n=e||r,s=_.from(n.headers),o=n.data;return a.forEach(t,function(c){o=c.call(r,o,s.normalize(),e?e.status:void 0)}),s.normalize(),o}function be(t){return!!(t&&t.__CANCEL__)}function Wr(t,e,r){m.call(this,t??"canceled",m.ERR_CANCELED,e,r),this.name="CanceledError"}a.inherits(Wr,m,{__CANCEL__:!0});var H=Wr;function bt(t,e,r){let n=r.config.validateStatus;!r.status||!n||n(r.status)?t(r):e(new m("Request failed with status code "+r.status,[m.ERR_BAD_REQUEST,m.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}var Kr=O.hasStandardBrowserEnv?{write(t,e,r,n,s,o){let i=[t+"="+encodeURIComponent(e)];a.isNumber(r)&&i.push("expires="+new Date(r).toGMTString()),a.isString(n)&&i.push("path="+n),a.isString(s)&&i.push("domain="+s),o===!0&&i.push("secure"),document.cookie=i.join("; ")},read(t){let e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function wt(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function xt(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function we(t,e){return t&&!wt(e)?xt(t,e):e}var Gr=O.hasStandardBrowserEnv?function(){let e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),n;function s(o){let i=o;return e&&(r.setAttribute("href",i),i=r.href),r.setAttribute("href",i),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=s(window.location.href),function(i){let c=a.isString(i)?s(i):i;return c.protocol===n.protocol&&c.host===n.host}}():function(){return function(){return!0}}();function Tt(t){let e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function Js(t,e){t=t||10;let r=new Array(t),n=new Array(t),s=0,o=0,i;return e=e!==void 0?e:1e3,function(u){let h=Date.now(),f=n[o];i||(i=h),r[s]=u,n[s]=h;let l=o,g=0;for(;l!==s;)g+=r[l++],l=l%t;if(s=(s+1)%t,s===o&&(o=(o+1)%t),h-i<e)return;let b=f&&h-f;return b?Math.round(g*1e3/b):void 0}}var Yr=Js;function Xr(t,e){let r=0,n=Yr(50,250);return s=>{let o=s.loaded,i=s.lengthComputable?s.total:void 0,c=o-r,u=n(c),h=o<=i;r=o;let f={loaded:o,total:i,progress:i?o/i:void 0,bytes:c,rate:u||void 0,estimated:u&&i&&h?(i-o)/u:void 0,event:s};f[e?"download":"upload"]=!0,t(f)}}var $s=typeof XMLHttpRequest<"u",Qr=$s&&function(t){return new Promise(function(r,n){let s=t.data,o=_.from(t.headers).normalize(),{responseType:i,withXSRFToken:c}=t,u;function h(){t.cancelToken&&t.cancelToken.unsubscribe(u),t.signal&&t.signal.removeEventListener("abort",u)}let f;if(a.isFormData(s)){if(O.hasStandardBrowserEnv||O.hasStandardBrowserWebWorkerEnv)o.setContentType(!1);else if((f=o.getContentType())!==!1){let[d,...x]=f?f.split(";").map(S=>S.trim()).filter(Boolean):[];o.setContentType([d||"multipart/form-data",...x].join("; "))}}let l=new XMLHttpRequest;if(t.auth){let d=t.auth.username||"",x=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";o.set("Authorization","Basic "+btoa(d+":"+x))}let g=we(t.baseURL,t.url);l.open(t.method.toUpperCase(),ye(g,t.params,t.paramsSerializer),!0),l.timeout=t.timeout;function b(){if(!l)return;let d=_.from("getAllResponseHeaders"in l&&l.getAllResponseHeaders()),S={data:!i||i==="text"||i==="json"?l.responseText:l.response,status:l.status,statusText:l.statusText,headers:d,config:t,request:l};bt(function(N){r(N),h()},function(N){n(N),h()},S),l=null}if("onloadend"in l?l.onloadend=b:l.onreadystatechange=function(){!l||l.readyState!==4||l.status===0&&!(l.responseURL&&l.responseURL.indexOf("file:")===0)||setTimeout(b)},l.onabort=function(){l&&(n(new m("Request aborted",m.ECONNABORTED,t,l)),l=null)},l.onerror=function(){n(new m("Network Error",m.ERR_NETWORK,t,l)),l=null},l.ontimeout=function(){let x=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded",S=t.transitional||je;t.timeoutErrorMessage&&(x=t.timeoutErrorMessage),n(new m(x,S.clarifyTimeoutError?m.ETIMEDOUT:m.ECONNABORTED,t,l)),l=null},O.hasStandardBrowserEnv&&(c&&a.isFunction(c)&&(c=c(t)),c||c!==!1&&Gr(g))){let d=t.xsrfHeaderName&&t.xsrfCookieName&&Kr.read(t.xsrfCookieName);d&&o.set(t.xsrfHeaderName,d)}s===void 0&&o.setContentType(null),"setRequestHeader"in l&&a.forEach(o.toJSON(),function(x,S){l.setRequestHeader(S,x)}),a.isUndefined(t.withCredentials)||(l.withCredentials=!!t.withCredentials),i&&i!=="json"&&(l.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&l.addEventListener("progress",Xr(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&l.upload&&l.upload.addEventListener("progress",Xr(t.onUploadProgress)),(t.cancelToken||t.signal)&&(u=d=>{l&&(n(!d||d.type?new H(null,t,l):d),l.abort(),l=null)},t.cancelToken&&t.cancelToken.subscribe(u),t.signal&&(t.signal.aborted?u():t.signal.addEventListener("abort",u)));let p=Tt(g);if(p&&O.protocols.indexOf(p)===-1){n(new m("Unsupported protocol "+p+":",m.ERR_BAD_REQUEST,t));return}l.send(s||null)})};var St={http:Ie,xhr:Qr};a.forEach(St,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});var Zr=t=>`- ${t}`,zs=t=>a.isFunction(t)||t===null||t===!1,$e={getAdapter:t=>{t=a.isArray(t)?t:[t];let{length:e}=t,r,n,s={};for(let o=0;o<e;o++){r=t[o];let i;if(n=r,!zs(r)&&(n=St[(i=String(r)).toLowerCase()],n===void 0))throw new m(`Unknown adapter '${i}'`);if(n)break;s[i||"#"+o]=n}if(!n){let o=Object.entries(s).map(([c,u])=>`adapter ${c} `+(u===!1?"is not supported by the environment":"is not available in the build")),i=e?o.length>1?`since :
`+o.map(Zr).join(`
`):" "+Zr(o[0]):"as no adapter specified";throw new m("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return n},adapters:St};function At(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new H(null,t)}function ze(t){return At(t),t.headers=_.from(t.headers),t.data=Ee.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),$e.getAdapter(t.adapter||ee.adapter)(t).then(function(n){return At(t),n.data=Ee.call(t,t.transformResponse,n),n.headers=_.from(n.headers),n},function(n){return be(n)||(At(t),n&&n.response&&(n.response.data=Ee.call(t,t.transformResponse,n.response),n.response.headers=_.from(n.response.headers))),Promise.reject(n)})}var en=t=>t instanceof _?{...t}:t;function U(t,e){e=e||{};let r={};function n(h,f,l){return a.isPlainObject(h)&&a.isPlainObject(f)?a.merge.call({caseless:l},h,f):a.isPlainObject(f)?a.merge({},f):a.isArray(f)?f.slice():f}function s(h,f,l){if(a.isUndefined(f)){if(!a.isUndefined(h))return n(void 0,h,l)}else return n(h,f,l)}function o(h,f){if(!a.isUndefined(f))return n(void 0,f)}function i(h,f){if(a.isUndefined(f)){if(!a.isUndefined(h))return n(void 0,h)}else return n(void 0,f)}function c(h,f,l){if(l in e)return n(h,f);if(l in t)return n(void 0,h)}let u={url:o,method:o,data:o,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:c,headers:(h,f)=>s(en(h),en(f),!0)};return a.forEach(Object.keys(Object.assign({},t,e)),function(f){let l=u[f]||s,g=l(t[f],e[f],f);a.isUndefined(g)&&l!==c||(r[f]=g)}),r}var We="1.6.8";var Rt={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Rt[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var tn={};Rt.transitional=function(e,r,n){function s(o,i){return"[Axios v"+We+"] Transitional option '"+o+"'"+i+(n?". "+n:"")}return(o,i,c)=>{if(e===!1)throw new m(s(i," has been removed"+(r?" in "+r:"")),m.ERR_DEPRECATED);return r&&!tn[i]&&(tn[i]=!0,console.warn(s(i," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(o,i,c):!0}};function Ws(t,e,r){if(typeof t!="object")throw new m("options must be an object",m.ERR_BAD_OPTION_VALUE);let n=Object.keys(t),s=n.length;for(;s-- >0;){let o=n[s],i=e[o];if(i){let c=t[o],u=c===void 0||i(c,o,t);if(u!==!0)throw new m("option "+o+" must be "+u,m.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new m("Unknown option "+o,m.ERR_BAD_OPTION)}}var Ke={assertOptions:Ws,validators:Rt};var j=Ke.validators,re=class{constructor(e){this.defaults=e,this.interceptors={request:new dt,response:new dt}}async request(e,r){try{return await this._request(e,r)}catch(n){if(n instanceof Error){let s;Error.captureStackTrace?Error.captureStackTrace(s={}):s=new Error;let o=s.stack?s.stack.replace(/^.+\n/,""):"";n.stack?o&&!String(n.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+o):n.stack=o}throw n}}_request(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=U(this.defaults,r);let{transitional:n,paramsSerializer:s,headers:o}=r;n!==void 0&&Ke.assertOptions(n,{silentJSONParsing:j.transitional(j.boolean),forcedJSONParsing:j.transitional(j.boolean),clarifyTimeoutError:j.transitional(j.boolean)},!1),s!=null&&(a.isFunction(s)?r.paramsSerializer={serialize:s}:Ke.assertOptions(s,{encode:j.function,serialize:j.function},!0)),r.method=(r.method||this.defaults.method||"get").toLowerCase();let i=o&&a.merge(o.common,o[r.method]);o&&a.forEach(["delete","get","head","post","put","patch","common"],p=>{delete o[p]}),r.headers=_.concat(i,o);let c=[],u=!0;this.interceptors.request.forEach(function(d){typeof d.runWhen=="function"&&d.runWhen(r)===!1||(u=u&&d.synchronous,c.unshift(d.fulfilled,d.rejected))});let h=[];this.interceptors.response.forEach(function(d){h.push(d.fulfilled,d.rejected)});let f,l=0,g;if(!u){let p=[ze.bind(this),void 0];for(p.unshift.apply(p,c),p.push.apply(p,h),g=p.length,f=Promise.resolve(r);l<g;)f=f.then(p[l++],p[l++]);return f}g=c.length;let b=r;for(l=0;l<g;){let p=c[l++],d=c[l++];try{b=p(b)}catch(x){d.call(this,x);break}}try{f=ze.call(this,b)}catch(p){return Promise.reject(p)}for(l=0,g=h.length;l<g;)f=f.then(h[l++],h[l++]);return f}getUri(e){e=U(this.defaults,e);let r=we(e.baseURL,e.url);return ye(r,e.params,e.paramsSerializer)}};a.forEach(["delete","get","head","options"],function(e){re.prototype[e]=function(r,n){return this.request(U(n||{},{method:e,url:r,data:(n||{}).data}))}});a.forEach(["post","put","patch"],function(e){function r(n){return function(o,i,c){return this.request(U(c||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:o,data:i}))}}re.prototype[e]=r(),re.prototype[e+"Form"]=r(!0)});var xe=re;var Ot=class t{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(o){r=o});let n=this;this.promise.then(s=>{if(!n._listeners)return;let o=n._listeners.length;for(;o-- >0;)n._listeners[o](s);n._listeners=null}),this.promise.then=s=>{let o,i=new Promise(c=>{n.subscribe(c),o=c}).then(s);return i.cancel=function(){n.unsubscribe(o)},i},e(function(o,i,c){n.reason||(n.reason=new H(o,i,c),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;let r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}static source(){let e;return{token:new t(function(s){e=s}),cancel:e}}},rn=Ot;function _t(t){return function(r){return t.apply(null,r)}}function Ct(t){return a.isObject(t)&&t.isAxiosError===!0}var kt={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(kt).forEach(([t,e])=>{kt[e]=t});var nn=kt;function sn(t){let e=new xe(t),r=pe(xe.prototype.request,e);return a.extend(r,xe.prototype,e,{allOwnKeys:!0}),a.extend(r,e,null,{allOwnKeys:!0}),r.create=function(s){return sn(U(t,s))},r}var w=sn(ee);w.Axios=xe;w.CanceledError=H;w.CancelToken=rn;w.isCancel=be;w.VERSION=We;w.toFormData=I;w.AxiosError=m;w.Cancel=w.CanceledError;w.all=function(e){return Promise.all(e)};w.spread=_t;w.isAxiosError=Ct;w.mergeConfig=U;w.AxiosHeaders=_;w.formToJSON=t=>Ve(a.isHTMLForm(t)?new FormData(t):t);w.getAdapter=$e.getAdapter;w.HttpStatusCode=nn;w.default=w;var Te=w;var{Axios:gl,AxiosError:El,CanceledError:bl,isCancel:wl,CancelToken:xl,VERSION:Tl,all:Sl,Cancel:Al,isAxiosError:Rl,spread:Ol,toFormData:_l,AxiosHeaders:Cl,HttpStatusCode:kl,formToJSON:vl,getAdapter:Nl,mergeConfig:Ll}=Te;var on=(t,e)=>`game${t}:${e}joined`,an=t=>`game${t}:ended`,cn=(t,e)=>`game${t}:${e}updated`,vt=t=>`chat${t}:message`,ln="game:created",un="game:removed";function Nt(t){document.addEventListener("DOMContentLoaded",async()=>{console.log("hellowdfklasdj");let e=window.location.pathname,r=e.substring(e.lastIndexOf("/")+1),n=r===""||isNaN(parseInt(r))?0:parseInt(r);console.log(n),console.log(e.substring(e.lastIndexOf("/")+1));var s;async function o(){try{let f=(await(await fetch("/auth/userid",{method:"GET"})).json()).id;console.log(f,"fsakldjflkasdjfkl asjkldfjaskldjflk"),s=f}catch(u){console.error("Error fetching user ID:",u)}return null}async function i(u,h,f){var l;if(console.log("in handlegameData",h),h)try{let T=await Te.get(`/games/${n}/getgamedata`);console.log("*********************inside if case of getgamedata",T);let k=T.data;if(console.log("*********************",JSON.stringify(k)),k.length==0)return null;l=k,console.log(l," this is in fetch data")}catch(T){return console.error("Game not started",T),null}else l=f,console.log(l);console.log(JSON.stringify(l),"game data object after ifelse...");let g=document.querySelector("#current-player-turn"),b=document.querySelector("#start-button"),p=document.querySelector("#draw-button"),d=document.querySelector("#topcardimg"),x=document.querySelector("#chosen-color-display"),S=document.querySelector("#card-template"),B=document.querySelector("#players-template"),N=document.querySelector("#players"),It=document.getElementById("table-header");N.innerHTML="";let Xs=document.querySelector("#otherplayers-cards"),Ht=document.querySelector("#currentplayer-cards");if(console.log("Draw Button: %%%%%%%%%%%%%%%%% ",p),console.log("checking game data........",JSON.stringify(l)),Object.keys(l).length===0){console.log("empty game data return");return}l[0]&&l[0].cards&&l[0].cards.is_started?(b&&(b.style.display="none"),p&&(p.style.display="block")):(b&&(b.style.display="block"),p&&(p.style.display="none"));let{"-1":On,...Ae}=l,K=On.cards[0],Re=document.createElement("img");Re.src=`/images/favicons/${K.color}_${K.value}_${K.specialcard}.png`,Re.classList.add("w-16","h-24"),console.log(Re.src," src "),d.innerHTML=`Current Color : ${K.color} `,d.appendChild(Re),console.log({chosenColorDisplay:x});var Ge;for(var D in Ae){if(D!=="-1"&&Ae[D].userinfo&&Ae[D].userinfo.email){let T=B.content.cloneNode(!0),k=T.querySelector(".username"),V=T.querySelector(".count");if(k){let A=l[D].userinfo.id,Ye=l[D].userinfo.email.substring(0,l[D].userinfo.email.indexOf("@"));K.user_id==A&&(Ge=Ye),k.textContent=u==A?`${Ye} (User ID: ${A})  (You)`:`${Ye} (User ID: ${A})`,k.classList.add("font-medium","text-gray-900")}V&&(V.textContent=l[D].count.toString()+" cards holding"),V.classList.add("text-sm","text-gray-600","font-semibold","px-4","py-2"),N.appendChild(document.importNode(T,!0))}D==u&&(Ht.innerHTML="",Ae[D].cards.forEach(T=>{let k=document.createElement("img");k.src=`/images/favicons/${T.color}_${T.value}_${T.specialcard}.png`,k.classList.add("w-16","h-24");var V=T.color;k.addEventListener("click",async function(){if(T.value==="Wild"||T.value==="Wild Draw Four")if(V=prompt("Please choose a color: red, yellow, green, or blue"),["red","yellow","green","blue"].includes(V?.toLowerCase()))T.color=V.toLowerCase();else{alert("You must choose a color: red, yellow, green, or blue");return}try{let A=await Te.post(`/games/play/${T.game_id}`,JSON.stringify(T),{headers:{"Content-Type":"application/json"}});console.log("chekcing response&&&&&&&&&&&&",A),A.data.success?A.data.message&&alert(A.data.message):alert(A.data.message)}catch(A){console.log("logging error...........",A),A.response&&A.response.data&&A.response.data.message?alert(A.response.data.message):alert("An error occurred while playing the card. Please try again.")}}),Ht.appendChild(k)}))}console.log({currentUser:Ge});let _n=K.user_id===-1?"":`Current Player Turn: ${Ge}`;return g.textContent=_n,console.log({currentPlayerTurn:g}),null}if(await o(),s==null)return null;t.on(on(n,s),u=>{console.log("game joined",u);let h=document.getElementsByClassName("usercontainer1")[0];h.innerHTML="",u.users.forEach(f=>{let l=document.createElement("div");l.classList.add("flex","flex-col","items-center","px-10");let g=document.createElement("p"),b=document.createElement("img");b.src=`https://gravatar.com/avatar/${f.gravatar}`,b.classList.add("h-10","w-10","rounded-full"),b.alt="User Avatar",g.innerText=f.email.substring(0,f.email.indexOf("@")),g.classList.add("font-bold","text-gray-800"),l.appendChild(b),l.appendChild(g),h.appendChild(l)})}),t.on(an(n),u=>{alert(u),window.location.href="/lobby"}),await i(s,!0,{});let c=cn(n,s);console.log("event name",c),t.on(c,async u=>{await i(s,!1,u);let h=document.getElementsByClassName("isstartedelement")[0];h.textContent=""}),console.log("Listening for GAME_UPDATED event with name:",c)})}var fn=[Nt];var Ks=["second","minute","hour","day","week","month","year"];function hn(t,e){if(e===0)return["just now","right now"];var r=Ks[Math.floor(e/2)];return t>1&&(r+="s"),[t+" "+r+" ago","in "+t+" "+r]}var Gs=["\u79D2","\u5206\u949F","\u5C0F\u65F6","\u5929","\u5468","\u4E2A\u6708","\u5E74"];function pn(t,e){if(e===0)return["\u521A\u521A","\u7247\u523B\u540E"];var r=Gs[~~(e/2)];return[t+" "+r+"\u524D",t+" "+r+"\u540E"]}var Lt={},Bt=function(t,e){Lt[t]=e},Pt=function(t){return Lt[t]||Lt.en_US};var W=[60,60,24,7,4.345238095238096,12];function dn(t){return t instanceof Date?t:!isNaN(t)||/^\d+$/.test(t)?new Date(parseInt(t)):(t=(t||"").trim().replace(/\.\d+/,"").replace(/-/,"/").replace(/-/,"/").replace(/(\d)T(\d)/,"$1 $2").replace(/Z/," UTC").replace(/([+-]\d\d):?(\d\d)/," $1$2"),new Date(t))}function Dt(t,e){var r=t<0?1:0;t=Math.abs(t);for(var n=t,s=0;t>=W[s]&&s<W.length;s++)t/=W[s];return t=Math.floor(t),s*=2,t>(s===0?9:1)&&(s+=1),e(t,s,n)[r].replace("%s",t.toString())}function Ft(t,e){var r=e?dn(e):new Date;return(+r-+dn(t))/1e3}function mn(t){for(var e=1,r=0,n=Math.abs(t);t>=W[r]&&r<W.length;r++)t/=W[r],e*=W[r];return n=n%e,n=n?e-n:e,Math.ceil(n)}var yn="timeago-id";function gn(t){return t.getAttribute("datetime")}function En(t,e){t.setAttribute(yn,e)}function bn(t){return parseInt(t.getAttribute(yn))}var wn={},Ys=function(t){clearTimeout(t),delete wn[t]};function xn(t,e,r,n){Ys(bn(t));var s=n.relativeDate,o=n.minInterval,i=Ft(e,s);t.innerText=Dt(i,r);var c=setTimeout(function(){xn(t,e,r,n)},Math.min(Math.max(mn(i),o||1)*1e3,2147483647));wn[c]=0,En(t,c)}function qt(t,e,r){var n=t.length?t:[t];return n.forEach(function(s){xn(s,gn(s),Pt(e),r||{})}),n}Bt("en_US",hn);Bt("zh_CN",pn);var Se=document.querySelector("#chat-message-area"),Tn=document.querySelector("#chat-message-template");function Sn(t){let e=window.location.pathname,r=e.substring(e.lastIndexOf("/")+1)==="lobby"?0:parseInt(e.substring(e.lastIndexOf("/")+1),10);console.log("Hello11"),console.log(vt(r)),console.log("Hello11"),t.on(vt(r),({roomId:n,message:s,senderEmail:o,gravatar:i,timestamp:c})=>{if(Tn===null||Se===null){console.error("Chat functionality not configured on this page");return}let u=Tn.content.cloneNode(!0),h=u.querySelector("img");h.src=`https://gravatar.com/avatar/${i}`,h.alt=`${o}'s gravatar`;let f=u.querySelector("span.chat-message-username");f.textContent=o.substring(0,o.indexOf("@"));let l=u.querySelector("time");l.dateTime=c.toString(),qt(l);let g=u.querySelector(".chat-message-body");g.textContent=s,Se.insertBefore(u,Se.firstChild),Se.scrollTop=Se.scrollHeight})}function Ut(t){let e=document.querySelector("#available-games-list"),r=document.querySelector("#available-game-template");t.on(ln,({gameId:n,creatorEmail:s,creatorGravatar:o,description:i})=>{if(e===null||r===null){console.error("Games list or template not found");return}let c=r.content.cloneNode(!0),u=c.querySelector("li");console.log(u),console.log("******************",i),u.dataset.gameId=n.toString();let h=c.querySelector("img");h.src=`https://gravatar.com/avatar/${o}`,h.alt=`${s.substring(0,s.indexOf("@"))}'s gravatar`;let f=c.querySelector(".game-description");console.log("%%%%%%%%%%",f),f.textContent=i;let l=c.querySelector("form");l.action=`/games/join/${n}`,e.appendChild(c)})}var An=document.querySelector("#available-games-list");function Mt(t){t.on(un,({gameId:e})=>{let r=document.querySelector(`[data-game-id="${e}"]`);if(An===null||r===null){console.error("Games list or game element not found");return}An.removeChild(r)})}var Rn=[Sn,Mt,Ut];window.socket=he();console.log("inside socket.............");Sr.forEach(t=>t());fn.forEach(t=>t(window.socket));Rn.forEach(t=>t(window.socket));})();
